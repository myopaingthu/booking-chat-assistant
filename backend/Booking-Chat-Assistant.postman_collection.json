{
	"info": {
		"name": "Booking Chat Assistant API",
		"description": "API collection for testing Booking Chat Assistant backend (Phases 1-3)",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Health",
			"item": [
				{
					"name": "Health Check",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/health",
							"host": ["{{base_url}}"],
							"path": ["api", "health"]
						}
					}
				}
			]
		},
		{
			"name": "Businesses - Services",
			"item": [
				{
					"name": "Get Services",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/services",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "services"]
						}
					}
				},
				{
					"name": "Create Service",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Haircut\",\n  \"durationMin\": 30,\n  \"bufferMin\": 15,\n  \"enabled\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/services",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "services"]
						}
					}
				},
				{
					"name": "Update Service",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Haircut & Styling\",\n  \"durationMin\": 45,\n  \"bufferMin\": 15,\n  \"enabled\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/services/{{service_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "services", "{{service_id}}"]
						}
					}
				},
				{
					"name": "Delete Service",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/services/{{service_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "services", "{{service_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "Businesses - Hours",
			"item": [
				{
					"name": "Get Business Hours",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/hours",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "hours"]
						}
					}
				},
				{
					"name": "Create Business Hours (Monday)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"weekday\": 1,\n  \"open\": \"09:00\",\n  \"close\": \"18:00\",\n  \"isClosed\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/hours",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "hours"]
						}
					}
				},
				{
					"name": "Create Business Hours (Sunday - Closed)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"weekday\": 0,\n  \"open\": \"00:00\",\n  \"close\": \"00:00\",\n  \"isClosed\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/hours",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "hours"]
						}
					}
				},
				{
					"name": "Update Business Hours",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"weekday\": 1,\n  \"open\": \"10:00\",\n  \"close\": \"19:00\",\n  \"isClosed\": false\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/hours/{{hours_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "hours", "{{hours_id}}"]
						}
					}
				},
				{
					"name": "Delete Business Hours",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/hours/{{hours_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "hours", "{{hours_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "Businesses - Blackouts",
			"item": [
				{
					"name": "Get Blackouts",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/blackouts",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "blackouts"]
						}
					}
				},
				{
					"name": "Create Blackout (Single Date)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"startDate\": \"2024-12-25T00:00:00.000Z\",\n  \"reason\": \"Christmas Holiday\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/blackouts",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "blackouts"]
						}
					}
				},
				{
					"name": "Create Blackout (Date Range)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"startDate\": \"2024-12-30T00:00:00.000Z\",\n  \"endDate\": \"2025-01-02T23:59:59.999Z\",\n  \"reason\": \"New Year Holiday\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/blackouts",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "blackouts"]
						}
					}
				},
				{
					"name": "Update Blackout",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"startDate\": \"2024-12-25T00:00:00.000Z\",\n  \"reason\": \"Christmas Holiday - Closed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/blackouts/{{blackout_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "blackouts", "{{blackout_id}}"]
						}
					}
				},
				{
					"name": "Delete Blackout",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/blackouts/{{blackout_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "blackouts", "{{blackout_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "Businesses - Availability",
			"item": [
				{
					"name": "Get Available Slots",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/availability?serviceId={{service_id}}&startDate=2024-12-20T00:00:00.000Z&endDate=2024-12-27T23:59:59.999Z",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "availability"],
							"query": [
								{
									"key": "serviceId",
									"value": "{{service_id}}"
								},
								{
									"key": "startDate",
									"value": "2024-12-20T00:00:00.000Z"
								},
								{
									"key": "endDate",
									"value": "2024-12-27T23:59:59.999Z"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "Bookings",
			"item": [
				{
					"name": "Get Bookings",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/bookings?startDate=2024-12-01T00:00:00.000Z&endDate=2024-12-31T23:59:59.999Z&status=pending",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "bookings"],
							"query": [
								{
									"key": "startDate",
									"value": "2024-12-01T00:00:00.000Z",
									"disabled": true
								},
								{
									"key": "endDate",
									"value": "2024-12-31T23:59:59.999Z",
									"disabled": true
								},
								{
									"key": "status",
									"value": "pending",
									"disabled": true
								}
							]
						}
					}
				},
				{
					"name": "Create Booking",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"serviceId\": \"{{service_id}}\",\n  \"startISO\": \"2024-12-20T10:00:00.000Z\",\n  \"endISO\": \"2024-12-20T10:30:00.000Z\",\n  \"customer\": {\n    \"name\": \"John Doe\",\n    \"phone\": \"+959123456789\"\n  },\n  \"threadId\": \"thread_123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/bookings",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "bookings"]
						}
					}
				},
				{
					"name": "Get Booking by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/bookings/{{booking_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "bookings", "{{booking_id}}"]
						}
					}
				},
				{
					"name": "Update Booking Status (Confirm)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"confirmed\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/bookings/{{booking_id}}/status",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "bookings", "{{booking_id}}", "status"]
						}
					}
				},
				{
					"name": "Update Booking Status (Cancel)",
					"request": {
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"cancelled\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/bookings/{{booking_id}}/status",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "bookings", "{{booking_id}}", "status"]
						}
					}
				},
				{
					"name": "Delete Booking",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/businesses/{{business_id}}/bookings/{{booking_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "businesses", "{{business_id}}", "bookings", "{{booking_id}}"]
						}
					}
				}
			]
		},
		{
			"name": "Knowledge Base",
			"item": [
				{
					"name": "Ingest KB Content",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"clearExisting\": true,\n  \"content\": {\n    \"hours\": \"We are open Monday to Friday from 9:00 AM to 6:00 PM. Saturday from 10:00 AM to 4:00 PM. Closed on Sundays.\",\n    \"location\": \"Our salon is located at 123 Main Street, Yangon, Myanmar. We are near the Central Park. Parking available.\",\n    \"services\": \"We offer the following services:\\n\\n1. Haircut - 30 minutes\\n2. Hair Styling - 45 minutes\\n3. Hair Color - 90 minutes\\n4. Hair Treatment - 60 minutes\\n\\nAll services include consultation with our stylists.\",\n    \"policies\": \"Cancellation Policy: Please cancel at least 24 hours in advance. Late cancellations may incur a fee.\\n\\nPayment: We accept cash and mobile payments.\\n\\nNo-show Policy: Multiple no-shows may result in requiring a deposit for future bookings.\",\n    \"faqs\": [\n      {\n        \"question\": \"What are your operating hours?\",\n        \"answer\": \"We are open Monday to Friday from 9:00 AM to 6:00 PM, Saturday from 10:00 AM to 4:00 PM, and closed on Sundays.\"\n      },\n      {\n        \"question\": \"Do you accept walk-ins?\",\n        \"answer\": \"Yes, we accept walk-ins based on availability, but we recommend booking in advance to secure your preferred time slot.\"\n      },\n      {\n        \"question\": \"What payment methods do you accept?\",\n        \"answer\": \"We accept cash and mobile payment methods like KBZPay and WaveMoney.\"\n      },\n      {\n        \"question\": \"Can I cancel my appointment?\",\n        \"answer\": \"Yes, you can cancel your appointment. Please cancel at least 24 hours in advance to avoid any cancellation fees.\"\n      }\n    ],\n    \"additionalInfo\": \"We are a family-owned salon with over 15 years of experience in hair styling and beauty services. Our team consists of certified stylists trained in the latest techniques from international academies. We specialize in Asian hair types and offer personalized consultations for each client. Our salon uses premium hair care products from leading brands. We also offer gift cards and package deals for regular customers. We participate in community events and sponsor local beauty pageants.\",\n    \"lang\": \"en\"\n  }\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/kb/{{business_id}}/ingest",
							"host": ["{{base_url}}"],
							"path": ["api", "kb", "{{business_id}}", "ingest"]
						}
					}
				},
				{
					"name": "Search KB",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/kb/{{business_id}}/search?query=What are your operating hours?&lang=en&limit=5",
							"host": ["{{base_url}}"],
							"path": ["api", "kb", "{{business_id}}", "search"],
							"query": [
								{
									"key": "query",
									"value": "What are your operating hours?",
									"description": "Search query"
								},
								{
									"key": "lang",
									"value": "en",
									"disabled": true
								},
								{
									"key": "limit",
									"value": "5",
									"disabled": true
								}
							]
						}
					}
				},
				{
					"name": "Get KB Stats",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/kb/{{business_id}}/stats",
							"host": ["{{base_url}}"],
							"path": ["api", "kb", "{{business_id}}", "stats"]
						}
					}
				},
				{
					"name": "Clear KB",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/kb/{{business_id}}/clear",
							"host": ["{{base_url}}"],
							"path": ["api", "kb", "{{business_id}}", "clear"]
						}
					}
				}
			]
		},
		{
			"name": "AI Orchestrator",
			"item": [
				{
					"name": "Answer Question (FAQ)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"What are your operating hours?\",\n  \"threadId\": \"test_thread_123\",\n  \"lang\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ai/{{business_id}}/answer",
							"host": ["{{base_url}}"],
							"path": ["api", "ai", "{{business_id}}", "answer"]
						}
					}
				},
				{
					"name": "Start Booking Flow",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"I want to book an appointment\",\n  \"threadId\": \"test_thread_456\",\n  \"lang\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ai/{{business_id}}/answer",
							"host": ["{{base_url}}"],
							"path": ["api", "ai", "{{business_id}}", "answer"]
						}
					}
				},
				{
					"name": "Continue Booking (Service Selection)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"I want a haircut\",\n  \"threadId\": \"test_thread_456\",\n  \"lang\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ai/{{business_id}}/answer",
							"host": ["{{base_url}}"],
							"path": ["api", "ai", "{{business_id}}", "answer"]
						}
					}
				},
				{
					"name": "Continue Booking (Date Selection)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"Tomorrow\",\n  \"threadId\": \"test_thread_456\",\n  \"lang\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ai/{{business_id}}/answer",
							"host": ["{{base_url}}"],
							"path": ["api", "ai", "{{business_id}}", "answer"]
						}
					}
				},
				{
					"name": "Continue Booking (Time Selection)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"10:00 AM\",\n  \"threadId\": \"test_thread_456\",\n  \"lang\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ai/{{business_id}}/answer",
							"host": ["{{base_url}}"],
							"path": ["api", "ai", "{{business_id}}", "answer"]
						}
					}
				},
				{
					"name": "Continue Booking (Name)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"My name is John Doe\",\n  \"threadId\": \"test_thread_456\",\n  \"lang\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ai/{{business_id}}/answer",
							"host": ["{{base_url}}"],
							"path": ["api", "ai", "{{business_id}}", "answer"]
						}
					}
				},
				{
					"name": "Continue Booking (Phone)",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"09123456789\",\n  \"threadId\": \"test_thread_456\",\n  \"lang\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ai/{{business_id}}/answer",
							"host": ["{{base_url}}"],
							"path": ["api", "ai", "{{business_id}}", "answer"]
						}
					}
				},
				{
					"name": "Confirm Booking",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"yes\",\n  \"threadId\": \"test_thread_456\",\n  \"lang\": \"en\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/ai/{{business_id}}/answer",
							"host": ["{{base_url}}"],
							"path": ["api", "ai", "{{business_id}}", "answer"]
						}
					}
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:3001",
			"type": "string"
		},
		{
			"key": "business_id",
			"value": "test_business_123",
			"type": "string",
			"description": "Replace with actual business ID from your database"
		},
		{
			"key": "service_id",
			"value": "",
			"type": "string",
			"description": "Will be populated after creating a service"
		},
		{
			"key": "hours_id",
			"value": "",
			"type": "string",
			"description": "Will be populated after creating business hours"
		},
		{
			"key": "blackout_id",
			"value": "",
			"type": "string",
			"description": "Will be populated after creating a blackout"
		},
		{
			"key": "booking_id",
			"value": "",
			"type": "string",
			"description": "Will be populated after creating a booking"
		}
	]
}

